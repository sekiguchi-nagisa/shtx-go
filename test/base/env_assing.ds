# RUN: eval $cmd $self

source ../../shtx
source ../common/assert.ds

## no env
assert !checkenv ZZZZ
assert "$({ fake_eval "printenv ZZZZ"; assert $? == 1; assert !checkenv ZZZZ; })" == ''
assert_fake_eval "HOGE=@@@ printenv HOGE" "@@@"

## assign env
assert !checkenv ZZZZ
assert !checkenv AAAA
assert "$({ fake_eval "AAAA=1234 \
    ZZZZ='echo 'hell \
    printenv \
    ZZZZ \
    AAAA"; assert $? == 0; assert !checkenv ZZZZ; assert !checkenv AAAA; })" == $'echo hell\n1234'

true

# CHECK_RE: ^$
# CHECKERR_RE: ^$
# STATUS: 0